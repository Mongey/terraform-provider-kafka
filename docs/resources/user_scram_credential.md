---
page_title: "kafka_user_scram_credential Resource - terraform-provider-kafka"
subcategory: ""
description: |-
  A resource for managing Kafka SCRAM user credentials for SASL authentication.
---

# kafka_user_scram_credential (Resource)

The `kafka_user_scram_credential` resource manages SCRAM (Salted Challenge Response Authentication Mechanism) credentials for Kafka users. SCRAM provides a secure way to authenticate clients using username/password combinations without transmitting passwords in plain text.

## Example Usage

### Basic SCRAM-SHA-256 User

```terraform
resource "kafka_user_scram_credential" "producer" {
  username        = "producer-service"
  scram_mechanism = "SCRAM-SHA-256"
  password        = var.producer_password
}
```

### SCRAM-SHA-512 User with Custom Iterations

```terraform
resource "kafka_user_scram_credential" "admin" {
  username         = "kafka-admin"
  scram_mechanism  = "SCRAM-SHA-512"
  scram_iterations = 8192
  password         = var.admin_password
}
```

### Multiple Users with Random Passwords

```terraform
# Generate random passwords for better security
resource "random_password" "service_passwords" {
  for_each = toset(["order-service", "payment-service", "shipping-service"])

  length  = 32
  special = true
}

# Create SCRAM credentials for each service
resource "kafka_user_scram_credential" "services" {
  for_each = random_password.service_passwords

  username        = each.key
  scram_mechanism = "SCRAM-SHA-256"
  password        = each.value.result
}
```

### Integration with ACLs

```terraform
# Create user credentials
resource "kafka_user_scram_credential" "analytics" {
  username        = "analytics-processor"
  scram_mechanism = "SCRAM-SHA-256"
  password        = var.analytics_password
}

# Grant permissions to the user
resource "kafka_acl" "analytics_read" {
  resource_name                = "events-*"
  resource_type                = "Topic"
  resource_pattern_type_filter = "Prefixed"
  acl_principal                = "User:${kafka_user_scram_credential.analytics.username}"
  acl_host                     = "*"
  acl_operation                = "Read"
  acl_permission_type          = "Allow"
}
```

## Import

SCRAM credentials can be imported using the format `username|scram_mechanism|password`:

```shell
terraform import kafka_user_scram_credential.example 'my-user|SCRAM-SHA-256|my-password'
```

-> **Note:** The password must be provided during import as it cannot be read from Kafka.

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `scram_mechanism` (String) The SCRAM mechanism used to generate the credential (SCRAM-SHA-256, SCRAM-SHA-512)
- `username` (String) The name of the credential

### Optional

> **NOTE**: [Write-only arguments](https://developer.hashicorp.com/terraform/language/resources/ephemeral#write-only-arguments) are supported in Terraform 1.11 and later.

- `password` (String, Sensitive) The password of the credential (deprecated, use password_wo instead)
- `password_wo` (String, Sensitive, [Write-only](https://developer.hashicorp.com/terraform/language/resources/ephemeral#write-only-arguments)) The write-only password of the credential
- `password_wo_version` (String) Version identifier for the write-only password to track changes
- `scram_iterations` (Number) The number of SCRAM iterations used when generating the credential

### Read-Only

- `id` (String) The ID of this resource.

## SCRAM Mechanisms

### SCRAM-SHA-256
- Provides good security with reasonable performance
- Recommended for most use cases
- Default iterations: 4096

### SCRAM-SHA-512
- Provides stronger security at a slight performance cost
- Recommended for high-security environments
- Default iterations: 4096

## Client Configuration

After creating SCRAM credentials, configure your Kafka clients:

### Java Client Configuration
```properties
security.protocol=SASL_SSL
sasl.mechanism=SCRAM-SHA-256
sasl.jaas.config=org.apache.kafka.common.security.scram.ScramLoginModule required \
  username="myuser" \
  password="mypassword";
```

### Python Client (kafka-python)
```python
from kafka import KafkaProducer

producer = KafkaProducer(
    bootstrap_servers=['localhost:9092'],
    security_protocol='SASL_SSL',
    sasl_mechanism='SCRAM-SHA-256',
    sasl_plain_username='myuser',
    sasl_plain_password='mypassword'
)
```

## Best Practices

1. **Use Strong Passwords**: Generate random passwords of sufficient length (32+ characters recommended)
2. **Choose Appropriate Iterations**: Higher iterations provide better security but impact authentication performance
3. **Prefer SCRAM-SHA-512**: For production environments with sensitive data
4. **Secure Password Storage**: Use Terraform variables, environment variables, or secret management systems
5. **Regular Rotation**: Implement a password rotation policy for production environments
6. **Combine with TLS**: Always use SCRAM with TLS encryption (SASL_SSL) in production

~> **Warning:** The password is stored in Terraform state. Ensure your state backend is encrypted and access is restricted.