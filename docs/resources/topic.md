---
page_title: "kafka_topic Resource - terraform-provider-kafka"
subcategory: ""
description: |-
  A resource for managing Kafka topics. Supports creating topics with custom configurations and increasing partition counts without recreation.
---

# kafka_topic (Resource)

The `kafka_topic` resource manages Apache Kafka topics, including their partition count, replication factor, and various configuration parameters. This resource supports non-destructive partition count increases.

## Example Usage

### Basic Topic

```terraform
resource "kafka_topic" "example" {
  name               = "example-topic"
  replication_factor = 3
  partitions         = 10
}
```

### Topic with Common Configurations

```terraform
resource "kafka_topic" "logs" {
  name               = "application-logs"
  replication_factor = 3
  partitions         = 50

  config = {
    "retention.ms"     = "604800000" # 7 days
    "segment.ms"       = "86400000"  # 1 day
    "cleanup.policy"   = "delete"
    "compression.type" = "gzip"
  }
}
```

### Compacted Topic for Event Sourcing

```terraform
resource "kafka_topic" "events" {
  name               = "user-events"
  replication_factor = 3
  partitions         = 100

  config = {
    "cleanup.policy"        = "compact"
    "retention.ms"          = "-1"       # Keep forever
    "min.compaction.lag.ms" = "3600000"  # 1 hour
    "delete.retention.ms"   = "86400000" # 1 day tombstone retention
    "compression.type"      = "lz4"
    "segment.bytes"         = "1073741824" # 1GB segments
  }
}
```

### High-Throughput Topic

```terraform
resource "kafka_topic" "metrics" {
  name               = "system-metrics"
  replication_factor = 2
  partitions         = 200

  config = {
    "retention.ms"                   = "86400000" # 1 day
    "segment.ms"                     = "3600000"  # 1 hour
    "compression.type"               = "lz4"
    "max.message.bytes"              = "1048576" # 1MB
    "min.insync.replicas"            = "2"
    "unclean.leader.election.enable" = "false"
  }
}
```

## Import

Existing Kafka topics can be imported using the topic name:

```shell
terraform import kafka_topic.example example-topic
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `name` (String) The name of the topic.
- `partitions` (Number) Number of partitions.
- `replication_factor` (Number) Number of replicas.

### Optional

- `config` (Map of String) A map of string k/v attributes.

### Read-Only

- `id` (String) The ID of this resource.

## Configuration Parameters

The `config` map supports all Kafka topic-level configurations. Common configurations include:

### Retention Settings
- `retention.ms` - How long to retain messages (in milliseconds). Default: 604800000 (7 days)
- `retention.bytes` - Maximum size of the log before deleting old segments. Default: -1 (no limit)
- `segment.ms` - Time after which a log segment should be rotated. Default: 604800000 (7 days)
- `segment.bytes` - Maximum size of a single log segment file. Default: 1073741824 (1GB)

### Cleanup and Compaction
- `cleanup.policy` - Either "delete" or "compact" or both "compact,delete". Default: "delete"
- `min.compaction.lag.ms` - Minimum time a message will remain uncompacted. Default: 0
- `delete.retention.ms` - How long to retain delete tombstone markers for compacted topics. Default: 86400000 (1 day)

### Compression
- `compression.type` - Compression codec: "uncompressed", "zstd", "lz4", "snappy", "gzip", "producer". Default: "producer"

### Replication and Durability
- `min.insync.replicas` - Minimum number of replicas that must acknowledge a write. Default: 1
- `unclean.leader.election.enable` - Whether to allow replicas not in ISR to be elected leader. Default: false

### Message Size
- `max.message.bytes` - Maximum size of a message. Default: 1048588 (~1MB)
- `message.timestamp.type` - Whether to use CreateTime or LogAppendTime. Default: "CreateTime"

For a complete list of configurations, refer to the [Kafka documentation](https://kafka.apache.org/documentation/#topicconfigs).

-> **Note:** Increasing the partition count is supported without recreating the topic. However, decreasing partitions requires topic recreation.